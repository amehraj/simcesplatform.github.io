<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="http://foo/core_log-api/">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Log API - SimCES</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">
        <link href="../css/extra.css" rel="stylesheet">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">SimCES</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Use <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../core_features/" class="dropdown-item">Features</a>
</li>
                                    
<li>
    <a href="../core_install/" class="dropdown-item">Installation</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Run simulation</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../core_run/" class="dropdown-item">Run simulation</a>
</li>
            
<li>
    <a href="../core_follow-run/" class="dropdown-item">Follow running simulation</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="./" class="dropdown-item active">Log API</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Develop <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Basic concepts</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../core_time/" class="dropdown-item">Time and synchronization with epochs</a>
</li>
            
<li>
    <a href="../core_cmp-mgmt/" class="dropdown-item">Platform-managed and externally managed components</a>
</li>
            
<li>
    <a href="../core_soa/" class="dropdown-item">Service-oriented architecture</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">How to develop</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../core_create-cmp/" class="dropdown-item">Creating new component</a>
</li>
            
<li>
    <a href="../core_conv-msg/" class="dropdown-item">Conventions of messaging</a>
</li>
            
<li>
    <a href="../core_conv-name/" class="dropdown-item">Conventions of naming</a>
</li>
            
<li>
    <a href="../core_pseudocode/" class="dropdown-item">Pseudocode reference</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Simulation Tools package</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../core_sim-tools/" class="dropdown-item">Simulation Tools package</a>
</li>
            
<li>
    <a href="../core_abstractsimulationcomponent/" class="dropdown-item">AbstractSimulationComponent</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../core_workflow-sim/" class="dropdown-item">Workflow of component in simulation</a>
</li>
            
<li>
    <a href="../core_workflow-start-end/" class="dropdown-item">Workflow of start and end</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Communication</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../core_topics-queues-exchanges/" class="dropdown-item">Topics, queues and exchanges</a>
</li>
            
<li>
    <a href="../core_exchange-mgmt/" class="dropdown-item">Exchange, management</a>
</li>
            
<li>
    <a href="../core_exchange-sim/" class="dropdown-item">Exchange, simulation-specific</a>
</li>
            
<li>
    <a href="../core_topics/" class="dropdown-item">Topics (core)</a>
</li>
            
<li>
    <a href="../core_rabbitmq-reliability/" class="dropdown-item">Reliable messaging in RabbitMQ</a>
</li>
            
<li>
    <a href="../core_amqp-footprint/" class="dropdown-item">Footprint of AMQP items</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Message structures (core)</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../core_msg/" class="dropdown-item">Message structures (core)</a>
</li>
            
<li>
    <a href="../core_msgtype/" class="dropdown-item">Message type names (core)</a>
</li>
            
<li>
    <a href="../core_ucum/" class="dropdown-item">Units of measure (UCUM)</a>
</li>
            
<li>
    <a href="../core_msg-abstractmessage/" class="dropdown-item">Message - AbstractMessage</a>
</li>
            
<li>
    <a href="../core_msg-abstractresult/" class="dropdown-item">Message - AbstractResult</a>
</li>
            
<li>
    <a href="../core_msg-epoch/" class="dropdown-item">Message - Epoch</a>
</li>
            
<li>
    <a href="../core_msg-simstate/" class="dropdown-item">Message - SimState</a>
</li>
            
<li>
    <a href="../core_msg-start/" class="dropdown-item">Message - Start</a>
</li>
            
<li>
    <a href="../core_msg-status/" class="dropdown-item">Message - Status</a>
</li>
            
<li>
    <a href="../core_block-quantity/" class="dropdown-item">Block - Quantity</a>
</li>
            
<li>
    <a href="../core_block-quantity-array/" class="dropdown-item">Block - Quantity array</a>
</li>
            
<li>
    <a href="../core_block-time-series/" class="dropdown-item">Block - Time series</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Platforms internals</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../core_logging-system/" class="dropdown-item">Logging system</a>
</li>
            
<li>
    <a href="../core_logwriter/" class="dropdown-item">LogWriter</a>
</li>
            
<li>
    <a href="../core_platformmanager/" class="dropdown-item">PlatformManager</a>
</li>
            
<li>
    <a href="../core_lifecycle/" class="dropdown-item">Simulation lifecycle</a>
</li>
            
<li>
    <a href="../core_simulationmanager/" class="dropdown-item">SimulationManager</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Energy domain <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../energy_conventions/" class="dropdown-item">Energy-domain-specific conventions</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Components (energy)</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../energy_grid-dss/" class="dropdown-item">Grid (DSS)</a>
</li>
            
<li>
    <a href="../energy_economicdispatch/" class="dropdown-item">Economic Dispatch</a>
</li>
            
<li>
    <a href="../energy_priceforecaster/" class="dropdown-item">Price Forecaster</a>
</li>
            
<li>
    <a href="../energy_resourceforecaster/" class="dropdown-item">Resource Forecaster</a>
</li>
            
<li>
    <a href="../energy_resources/" class="dropdown-item">Resources</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Message structures (energy)</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../energy_msg-networkstate-current/" class="dropdown-item">NetworkState.Current</a>
</li>
            
<li>
    <a href="../energy_msg-networkstate-loss/" class="dropdown-item">NetworkState.Loss</a>
</li>
            
<li>
    <a href="../energy_msg-networkstate-voltage/" class="dropdown-item">NetworkState.Voltage</a>
</li>
            
<li>
    <a href="../energy_msg-offer/" class="dropdown-item">Offer</a>
</li>
            
<li>
    <a href="../energy_msg-priceforecaststate/" class="dropdown-item">PriceForecastState</a>
</li>
            
<li>
    <a href="../energy_msg-resourceforecaststatedispatch/" class="dropdown-item">ResourceForecastState.Dispatch</a>
</li>
            
<li>
    <a href="../energy_msg-resourcestate/" class="dropdown-item">ResourceState</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../energy_msgtype/" class="dropdown-item">Message type names (energy)</a>
</li>
                                    
<li>
    <a href="../energy_software-pkg/" class="dropdown-item">Software packages</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Topics (energy)</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../energy_topics/" class="dropdown-item">Topics (energy)</a>
</li>
            
<li>
    <a href="../energy_topic-priceforecaststate/" class="dropdown-item">PriceForecastState.(MarketId).(ResourceId)</a>
</li>
            
<li>
    <a href="../energy_topic-resourceforecaststate/" class="dropdown-item">ResourceForecastState.(ResourceCategory).(ResourceId)</a>
</li>
            
<li>
    <a href="../energy_topic-resourcestate/" class="dropdown-item">ResourceState.(ResourceCategory).(ResourceId)</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../about/" class="nav-link">About...</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../core_follow-run/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../core_time/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#log-api" class="nav-link">Log API</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#quick-start" class="nav-link">Quick start</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#api-overview" class="nav-link">API overview</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#get-simulations" class="nav-link">Get simulations</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#get-simulation" class="nav-link">Get simulation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#get-messages-for-simulation-run" class="nav-link">Get messages for simulation run</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#get-invalid-messages-for-simulation-run" class="nav-link">Get invalid messages for simulation run</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#get-simple-timeseries-for-simulation" class="nav-link">Get simple timeseries for simulation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="log-api">Log API</h1>
<p>Once you have run a simulation, you can access the messages published by your
components from LogReader with the log API.</p>
<h2 id="quick-start">Quick start</h2>
<p>To verify that a simulation has been executed, you can retrieve simulation
information. Type this address into your web browser:</p>
<pre><code class="language-nohighlight">http://localhost:8080/simulations
</code></pre>
<ul>
<li>This assumes that you run the simulation platform locally</li>
<li>This will return the information of all simulation runs this far</li>
</ul>
<p>From the response, you can verify that a simulation has occurred by looking
at StartTime and EndTime strings. These should have a time value that matches
the time you executed the simulation.</p>
<p>The above used a direct call to the get simulations API. Alternatively you can
use the built-in user interface which can create the API calls for you. So to
perform the above operation with the user interface with your browser go to
address:</p>
<pre><code class="language-nohighlight">http://localhost:8080/
</code></pre>
<p>Then under the "Get metadata for all simulations" heading press the "send query" button.
This opens a new browser tab that uses the address from the first example and thus
shows the same information.</p>
<h2 id="api-overview">API overview</h2>
<p>LogReader implements the HTTP based API described below. LogReader also offers a
simple web browser based interface for the API available from the application
root path for example http://localhost:8080/. The API offers the following
features:</p>
<ul>
<li>Get list of simulations there are messages for.</li>
<li>Get information about a single simulation by its id.</li>
<li>Get messages for a simulation. Messages can be filtered in various ways such
  as topic and source process.</li>
<li>Get invalid messages published during a simulation run.</li>
<li>Create a json or csv time series from attribute values  in messages.     </li>
</ul>
<p>This documentation assumes that the reader is familiar with the general
messaging concepts of the simulation platform such as epochs and the various
message attribute value blocks like TimeseriesBlock and QuantityBlock. The
following notation is used to document request parameters and members of JSON
objects in response and request bodies:</p>
<ul>
<li>
<p>name (data type, parameter type, required): description</p>
</li>
<li>
<p>name: parameter or json member name</p>
</li>
<li>data type: value data type such as string, integer or ISO datetime</li>
<li>parameter type: Only for request parameters either in the URL path or in the
  URL query parameters</li>
<li>required: Indicates that the parameter or JSON member is required. If this
  keyword is not present the parameter or member is optional. This is not used
  with response JSON where all members can be assumed to be present.</li>
<li>description: Explain the purpose of the parameter or JSON member.</li>
</ul>
<p>The API is available from the application root path. So for example if LogReader
is running on localhost port 8080 the URL to get all simulations would be
http://localhost:8080/simulations. The examples for each API endpoint use
localhost port 8080 in example request URLs. Note that the message structures
and topics used in the examples may not always match the actual topics and
structures defined for the platfor. The examples are based on test data included
with LogReader which can be imported to the LogReader database. This allows
trying out the API. See the LogReader readme for instructions how to use the
test data.</p>
<h2 id="get-simulations">Get simulations</h2>
<p>method: GET<br />
path: /simulations</p>
<p>Returns a list of simulation runs the message database has messages for.</p>
<h3 id="request-parameters">Request parameters</h3>
<ul>
<li>fromDate (ISO datetime, query): Return simulation runs which have started on
  or after the given date.</li>
<li>toDate (ISO datetime, query) Return simulation runs that have been started
  before the given date.</li>
</ul>
<h3 id="response">Response</h3>
<p>List of simulation runs with the following information available about every
run.</p>
<ul>
<li>SimulationId (string): The id of the simulation.</li>
<li>Name (string): A human friendly name for the simulation.</li>
<li>Description (string): A longer description of the simulation run meant for
  humans.</li>
<li>StartTime (ISO datetime): The real world start time of the simulation run.</li>
<li>EndTime (ISO datetime): The real world end time of the simulation run.</li>
<li>Epochs (integer): Number of epochs in the simulation run.</li>
<li>Processes (string[]): List of names of processes participating in the
  simulation run.</li>
</ul>
<h3 id="example">Example</h3>
<p>Get list of simulations executed on or after 3th of June 2020 at 10:00.</p>
<h4 id="request">Request</h4>
<pre><code>http://localhost:8080/simulations?fromDate=2020-06-03T10:00:00Z
</code></pre>
<h4 id="response_1">Response</h4>
<pre><code>[
  {
    &quot;Description&quot;: &quot;This is a test simulation without example messages.&quot;,
    &quot;EndTime&quot;: &quot;2020-06-03T10:05:52.345000Z&quot;,
    &quot;Epochs&quot;: 40,
    &quot;Name&quot;: &quot;test simulation 2&quot;,
    &quot;Processes&quot;: [
      &quot;simulationManager&quot;,
      &quot;weatherDivinity&quot;,
      &quot;solarPlant1&quot;,
      &quot;battery1&quot;,
      &quot;battery2&quot;
    ],
    &quot;SimulationId&quot;: &quot;2020-06-03T10:01:52.345Z&quot;,
    &quot;StartTime&quot;: &quot;2020-06-03T10:01:52.345000Z&quot;
  },
  {
    &quot;Description&quot;: &quot;This is a test simulation without example messages.&quot;,
    &quot;EndTime&quot;: &quot;2020-06-03T04:15:52.345000Z&quot;,
    &quot;Epochs&quot;: 100,
    &quot;Name&quot;: &quot;test simulation 2&quot;,
    &quot;Processes&quot;: [
      &quot;simulationManager&quot;,
      &quot;weatherDivinity&quot;,
      &quot;solarPlant1&quot;,
      &quot;battery1&quot;
    ],
    &quot;SimulationId&quot;: &quot;2020-06-04T04:01:52.345Z&quot;,
    &quot;StartTime&quot;: &quot;2020-06-04T04:01:52.345000Z&quot;
  }
]
</code></pre>
<h2 id="get-simulation">Get simulation</h2>
<p>method: GET<br />
path: /simulations/{simulationId}</p>
<p>Returns general information about the given simulation run.</p>
<h3 id="request-parameters_1">Request parameters</h3>
<ul>
<li>simulationId (string, path, required): The id of a simulation run.</li>
</ul>
<h3 id="response_2">Response</h3>
<p>Information about the given simulation run with the same contents as in each get
simulations response item.</p>
<h3 id="example_1">Example</h3>
<p>Get information about simulation with id 2020-06-03T04:01:52.345Z.</p>
<h4 id="request_1">Request</h4>
<pre><code>http://localhost:8080/simulations/2020-06-03T04:01:52.345Z
</code></pre>
<h4 id="response_3">Response</h4>
<pre><code>{
  &quot;Description&quot;: &quot;This is a test simulation with some example messages.&quot;,
  &quot;EndTime&quot;: &quot;2020-06-03T04:11:52.345000Z&quot;,
  &quot;Epochs&quot;: 50,
  &quot;Name&quot;: &quot;test simulation 1&quot;,
  &quot;Processes&quot;: [
    &quot;simulationManager&quot;,
    &quot;weatherDivinity&quot;,
    &quot;solarPlant1&quot;,
    &quot;battery1&quot;,
    &quot;battery2&quot;,
    &quot;battery3&quot;
  ],
  &quot;SimulationId&quot;: &quot;2020-06-03T04:01:52.345Z&quot;,
  &quot;StartTime&quot;: &quot;2020-06-03T04:01:52.345000Z&quot;
}
</code></pre>
<h2 id="get-messages-for-simulation-run">Get messages for simulation run</h2>
<p>method: GET<br />
path: /simulations/{simulationId}/messages</p>
<p>Returns messages from the given simulation run. Without parameters returns all
messages. Parameters allow filtering in various ways.</p>
<h3 id="request-parameters_2">Request parameters</h3>
<ul>
<li>simulationId (string, path, required): Id of the simulation run messages are
  fetched from.</li>
<li>startEpoch (integer, query): Return messages published on or after the given
  epoch. Not applicable if epoch, fromSimDate or toSimDate are used.</li>
<li>endEpoch (integer, query): Return messages published on or before the given
  epoch. Not applicable if the epoch, fromSimDate or toSimDate are used.</li>
<li>epoch (integer, query): return messages published during the given epoch. Not
  applicable if fromSimDate, toSimDate endEpoch or startEpoch are used.</li>
<li>fromSimDate (ISO datetime, query): Return messages starting from the epoch
  that includes the given date. Not applicable if startEpoch, epoch or endEpoch
  are used.</li>
<li>toSimDate (ISO datetime, query): Return messages published before or on  the
  epoch that includes the given date. Not applicable if startEpoch, epoch or
  endEpoch are used.</li>
<li>process (string, query): Return messages that have been published by the given
  processes i.e. messages whose source is the given process. Value is a comma
  separated list of process ids.</li>
<li>topic (string, query): Return messages published to the given topic. Supports
  the same notation that is used when subscribing to the topics i.e. the same
  wildcard mechanism including the * and # characters.</li>
<li>onlyWarnings: (boolean, query): If true only messages that include warnings
  are returned. If false messages with and without warnings are both returned.
  False is the default behaviour if this parameter is not used.</li>
</ul>
<h3 id="response_4">Response</h3>
<p>List of messages as they have been saved into the database including the message
metadata. The messages will be sorted in ascending order by timestamp.</p>
<h3 id="example_2">Example</h3>
<p>Get messages that process solarPlant1 has published to topic
energy.production.solar on or before epoch 2 for simulation with id
2020-06-03T04:01:52.345Z.</p>
<h4 id="request_2">Request</h4>
<pre><code>http://localhost:8080/simulations/2020-06-03T04:01:52.345Z/messages?process=solarPlant1&amp;topic=energy.production.solar&amp;endEpoch=2
</code></pre>
<h4 id="response_5">Response</h4>
<pre><code>[
  {
    &quot;EpochNumber&quot;: 1,
    &quot;MessageId&quot;: &quot;solarPlant1-1&quot;,
    &quot;ReactivePower&quot;: {
      &quot;UnitOfMeasure&quot;: &quot;kV.A{r}&quot;,
      &quot;Value&quot;: 0.2
    },
    &quot;RealPower&quot;: {
      &quot;UnitOfMeasure&quot;: &quot;kW&quot;,
      &quot;Value&quot;: 5
    },
    &quot;SimulationId&quot;: &quot;2020-06-03T04:01:52.345Z&quot;,
    &quot;SourceProcessId&quot;: &quot;solarPlant1&quot;,
    &quot;Timestamp&quot;: &quot;2020-06-03T04:01:56Z&quot;,
    &quot;Topic&quot;: &quot;energy.production.solar&quot;,
    &quot;Type&quot;: &quot;ControlState&quot;,
    &quot;bus&quot;: &quot;bus1&quot;
  },
  {
    &quot;EpochNumber&quot;: 2,
    &quot;MessageId&quot;: &quot;solarPlant1-2&quot;,
    &quot;ReactivePower&quot;: {
      &quot;UnitOfMeasure&quot;: &quot;kV.A{r}&quot;,
      &quot;Value&quot;: 0.5
    },
    &quot;RealPower&quot;: {
      &quot;UnitOfMeasure&quot;: &quot;kW&quot;,
      &quot;Value&quot;: 8
    },
    &quot;SimulationId&quot;: &quot;2020-06-03T04:01:52.345Z&quot;,
    &quot;SourceProcessId&quot;: &quot;solarPlant1&quot;,
    &quot;Timestamp&quot;: &quot;2020-06-03T04:02:56Z&quot;,
    &quot;Topic&quot;: &quot;energy.production.solar&quot;,
    &quot;Type&quot;: &quot;ControlState&quot;,
    &quot;bus&quot;: &quot;bus1&quot;
  }
]
</code></pre>
<h2 id="get-invalid-messages-for-simulation-run">Get invalid messages for simulation run</h2>
<p>method: GET<br />
path: /simulations/{simulationId}/messages/invalid</p>
<p>Returns invalid messages from the given simulation run. This is intended for
debugging simulation issues. A normal simulation run should not contain invalid
messages. </p>
<h3 id="request-parameters_3">Request parameters</h3>
<ul>
<li>simulationId (string, path, required): Id of the simulation run messages are
  fetched from.</li>
<li>topic (string, query): Return invalid messages published to the given topic.
  Supports the same notation that is used when subscribing to the topics i.e.
  the same wildcard mechanism including the * and # characters.</li>
</ul>
<h3 id="response_6">Response</h3>
<p>List of invalid messages. The messages will be sorted in ascending order by
timestamp. The following attributes can be  available for each message:</p>
<ul>
<li>Timestamp: Timestamp from the message if the message had a valid timestamp.
  Otherwise this is a timestamp added when the message was stored to the
  database.</li>
<li>Topic: The topic the message was published to.</li>
<li>InvalidMessage: The message itself if it was valid json.</li>
<li>InvalidJsonMessage: Message as a string if the message could not be parsed as
  json.   </li>
</ul>
<h3 id="example_3">Example</h3>
<p>Get all invalid messages for simulation with id 2020-06-03T04:01:52.345Z. </p>
<h4 id="request_3">Request</h4>
<pre><code>http://localhost:8080/simulations/2020-06-03T04:01:52.345Z/messages/invalid
</code></pre>
<h4 id="response_7">Response</h4>
<pre><code>[
  {
    &quot;Timestamp&quot;: &quot;2020-06-03T04:01:53Z&quot;,
    &quot;Topic&quot;: &quot;Epoch&quot;,
    &quot;InvalidMessage&quot;: {
      &quot;EndTime&quot;: &quot;2020-06-03T14:00:00Z&quot;,
      &quot;EpochNumber&quot;: 1,
      &quot;MessageId&quot;: &quot;SimulationManager-2&quot;,
      &quot;SourceProcessId&quot;: &quot;SimulationManager&quot;,
      &quot;StartTime&quot;: &quot;2020-06-03T13:00:00Z&quot;,
      &quot;Timestamp&quot;: &quot;2020-06-03T04:01:53Z&quot;,
      &quot;Type&quot;: &quot;Epoch&quot;
    }
  },
  {
    &quot;Timestamp&quot;: &quot;2020-06-03T04:01:54Z&quot;,
    &quot;Topic&quot;: &quot;Status.Ready&quot;,
    &quot;InvalidJsonMessage&quot;: &quot;Ready&quot;
  }
]
</code></pre>
<p>NOTE: The first message is considered invalid since it is missing the
SimulationId attribute. The second message is invalid since it is just a text
string containing the word Ready.</p>
<h2 id="get-simple-timeseries-for-simulation">Get simple timeseries for simulation</h2>
<p>method: GET<br />
path: /simulations/{simulationId}/timeseries</p>
<p>Returns timeseries data constructed from values of given attributes of messages
that meet the given time, topic and process based filtering conditions.</p>
<h3 id="request-parameters_4">Request parameters</h3>
<p>Same parameters as in get simulation messages are used except onlyWarnings. In
addition the following parameters are used:</p>
<ul>
<li>attrs (string, query, required) Comma separated list of names of message
  attributes whose values are suitable for time series and which are then
  included to the timeseries response. It is possible to refer deeper into the
  message structure using the dot notation for example foo.bar.</li>
<li>format (string, query): Determines the response format. Possible values are
  csv and json. If this parameter is not used json is used as the default value.</li>
</ul>
<p>The following kinds of message attribute values are suitable for time series and
can be refered to in the attrs query parameter:</p>
<ul>
<li>Plain number, string or boolean values.</li>
<li>QuantityBlocks in which case the Value part of the QuantityBlock is added to
  the created time series.</li>
<li>TimeseriesBlock if only the attribute containing a time series block is
  referred to all attributes in the time series are included. It is also
  possible to refer to a particular attribute inside the time series block to
  only include it to the time series to be created.</li>
</ul>
<h3 id="response_8">Response</h3>
<p>json</p>
<p>A JSON object with the following members:</p>
<ul>
<li>TimeIndex (timeIndex[]): List of time index objects that indicate the
  timestamp for the data. For example if a timeindex object is the fifth item in
  the timeindex list then it has the time for the fifth value in each attribute
  values list. If there is no value for an attribute for a corresponding
  timeIndex value, the value will be nul.</li>
<li>{topic} (topicData): For each topic there is timeseries data a member named
  after the topic. The value is a topicDATa object.</li>
</ul>
<p>timeIndex object</p>
<ul>
<li>timestamp (ISO datetime): Indicates the simulation time for the corresponding
  data. </li>
<li>epoch (integer): Indicates the epoch for the message the corresponding data is
  from. </li>
</ul>
<p>TopicData object</p>
<ul>
<li>{processName} (attributeValues): For each process the timeseries has values
  for in the given topic a member where processName is replaced with the id of
  the process. The value is then attributeValues object.</li>
</ul>
<p>attributeValues object</p>
<ul>
<li>{attr}: For each message attribute a member where attr is replaced with the
  attribute name. The value is then list of attribute values from the messages
  or another attributeValues object if the actual values are deeper in the
  message structure.</li>
</ul>
<p>csv</p>
<p>csv data with the following column titles and colun value data types</p>
<ul>
<li>epoch (integer): Number of the epoch for the message the data in the row is
  from.</li>
<li>timestamp (iso datetime): Simulation timestamp for the data in the row.</li>
<li>{topic}:{processname}.{attr}: For each topic, process and message attribute
  the timeseries contains data for there is a column for it with a title
  consisting of the topic, process and attribute names. Attribute can consist of
  multiple parts separated by a period. If there is no data for the row at a
  certain time then the column has an empty cell.</li>
</ul>
<h3 id="example-1">Example 1</h3>
<p>Create a timeseries in the json format containing the real power and reactive
power QuantityBlock values from  messages that process solarPlant1 has published
to topic energy.production.solar on or before epoch 2 for simulation with id
2020-06-03T04:01:52.345Z. The messages which are the source for this time series
are shown in the response of example for Get messages for simulation. </p>
<h4 id="request_4">Request</h4>
<pre><code>http://localhost:8080/simulations/2020-06-03T04:01:52.345Z/timeseries?process=solarPlant1&amp;topic=energy.production.solar&amp;endEpoch=2&amp;attrs=RealPower,ReactivePower
</code></pre>
<h4 id="response_9">Response</h4>
<pre><code>{
  &quot;TimeIndex&quot;: [
    {
      &quot;epoch&quot;: 1,
      &quot;timestamp&quot;: &quot;2020-06-03T13:00:00Z&quot;
    },
    {
      &quot;epoch&quot;: 2,
      &quot;timestamp&quot;: &quot;2020-06-03T14:00:00Z&quot;
    }
  ],
  &quot;energy.production.solar&quot;: {
    &quot;solarPlant1&quot;: {
      &quot;ReactivePower&quot;: [
        0.2,
        0.5
      ],
      &quot;RealPower&quot;: [
        5,
        8
      ]
    }
  }
}
</code></pre>
<h3 id="example-2">Example 2</h3>
<p>Same as example 1 except the time series should be in the csv format.</p>
<h4 id="request_5">Request</h4>
<pre><code>http://localhost:8080/simulations/2020-06-03T04:01:52.345Z/timeseries?process=solarPlant1&amp;topic=energy.production.solar&amp;endEpoch=2&amp;attrs=RealPower,ReactivePower&amp;format=csv
</code></pre>
<h4 id="response_10">Response</h4>
<pre><code>epoch;timestamp;energy.production.solar:solarPlant1.RealPower;energy.production.solar:solarPlant1.ReactivePower
1;2020-06-03T13:00:00Z;5.0;0.2
2;2020-06-03T14:00:00Z;8.0;0.5
</code></pre>
<h3 id="example-3">Example 3</h3>
<p>Create a time series in the json format containing the chargePercentage values
from the batteryState timeseries block from messages published to the
energy.storage.state topic by processes battery1 and battery2 for simulation
with id 2020-06-03T04:01:52.345Z. The published messages look like the
following:</p>
<pre><code>{
  &quot;EpochNumber&quot;: 1,
  &quot;MessageId&quot;: &quot;battery1-1&quot;,
  &quot;SimulationId&quot;: &quot;2020-06-03T04:01:52.345Z&quot;,
  &quot;SourceProcessId&quot;: &quot;battery1&quot;,
  &quot;Timestamp&quot;: &quot;2020-06-03T04:01:56Z&quot;,
  &quot;Topic&quot;: &quot;energy.storage.state&quot;,
  &quot;Type&quot;: &quot;Result&quot;,
  &quot;batteryState&quot;: {
    &quot;Series&quot;: {
      &quot;capacity&quot;: {
        &quot;UnitOfMeasure&quot;: &quot;kWh&quot;,
        &quot;Values&quot;: [
          300,
          280
        ]
      },
      &quot;chargePercentage&quot;: {
        &quot;UnitOfMeasure&quot;: &quot;%&quot;,
        &quot;Values&quot;: [
          90,
          88
        ]
      }
    },
    &quot;TimeIndex&quot;: [
      &quot;2020-06-03T13:00:00Z&quot;,
      &quot;2020-06-03T13:30:00Z&quot;
    ]
  }
}
</code></pre>
<h4 id="request_6">Request</h4>
<pre><code>http://localhost:8080/simulations/2020-06-03T04:01:52.345Z/timeseries?process=battery1,battery2&amp;topic=energy.storage.state&amp;attrs=batteryState.chargePercentage
</code></pre>
<h4 id="response_11">Response</h4>
<pre><code>{
  &quot;TimeIndex&quot;: [
    {
      &quot;epoch&quot;: 1,
      &quot;timestamp&quot;: &quot;2020-06-03T13:00:00Z&quot;
    },
    {
      &quot;epoch&quot;: 1,
      &quot;timestamp&quot;: &quot;2020-06-03T13:30:00Z&quot;
    },
    {
      &quot;epoch&quot;: 2,
      &quot;timestamp&quot;: &quot;2020-06-03T14:00:00Z&quot;
    },
    {
      &quot;epoch&quot;: 2,
      &quot;timestamp&quot;: &quot;2020-06-03T14:30:00Z&quot;
    }
  ],
  &quot;energy.storage.state&quot;: {
    &quot;battery1&quot;: {
      &quot;batteryState&quot;: {
        &quot;chargePercentage&quot;: [
          90,
          88,
          87,
          91
        ]
      }
    },
    &quot;battery2&quot;: {
      &quot;batteryState&quot;: {
        &quot;chargePercentage&quot;: [
          40,
          42,
          45,
          48
        ]
      }
    }
  }
}
</code></pre>
<h3 id="example-4">Example 4</h3>
<p>Same as example 3 except timeseries is created in the csv format.</p>
<h4 id="request_7">Request</h4>
<pre><code>http://localhost:8080/simulations/2020-06-03T04:01:52.345Z/timeseries?process=battery1,battery2&amp;topic=energy.storage.state&amp;attrs=batteryState.chargePercentage&amp;format=csv
</code></pre>
<h4 id="response_12">Response</h4>
<pre><code>epoch;timestamp;energy.storage.state:battery1.batteryState.chargePercentage;energy.storage.state:battery2.batteryState.chargePercentage
1;2020-06-03T13:00:00Z;90;40
1;2020-06-03T13:30:00Z;88;42
2;2020-06-03T14:00:00Z;87;45
2;2020-06-03T14:30:00Z;91;48
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>SimCES | Simulation Environment of Complex Energy System</p>
                <p>Copyright &copy; 2021 Tampere University and VTT Technical Research Centre of Finland</p>
            <p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="https://datatracker.ietf.org/doc/html/bcp14">BCP 14</a> [<a href="https://datatracker.ietf.org/doc/html/rfc2119">RFC2119</a>] [<a href="https://datatracker.ietf.org/doc/html/rfc8174">RFC8174</a>] when, and only when, they appear in all capitals, as shown here.</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
